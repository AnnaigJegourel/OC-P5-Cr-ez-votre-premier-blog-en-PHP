{% extends 'layout/layout.twig' %}

{% block title %}Un article{% endblock %}

{% block description %}Page d'un article de blog{% endblock %}

{% block main %}
    <main id="post">

        <section>
            <h2>{{ post.title }} </h2>

            <p><str>par {{ post.user_id }} <str></p>
            <p><em>créé le : {{ post.date_created }} </em></p>
            <p><em>modifié le : {{ post.date_updated }} </em></p>

            <p> {{ post.intro }} </p>
            <p> {{ post.content }} </p>
            <p> <a href="index.php?access=post!postdelete&id={{post.id}}" accesskey="dp" title="DeletePost"> supprimer l'article </a> </p>
            <p> <a href="index.php?access=post!updatepostform&id={{post.id}}" accesskey="up" title="UpdatePost"> modifier l'article </a> </p>
        </section>

        <section>
            <h2>Test de la session : </h2>
            <p>la session est : {{ session }}</p>
        </section>

        <section>
            <h2>CREER UN COMMENTAIRE POUR CET ARTICLE :</h2>
            <p>post id: {{post.id}}</p>
            <form method="post" action="index.php?access=comment!commentcreate&id={{post.id}}">Saisissez votre commentaire :
                <label for="title">Saisissez un titre : </label>
                <input type="text" name="title">

                <label for="content">Saisissez votre texte : </label>
                <textarea name="content"></textarea>
                    
                <input type="submit" value="Envoyer">
            </form>
        </section>

        <section>
            <h2>LIRE!! et supprimer !! TOUS LES COMMENTAIRES DE CET ARTICLE :</h2>
            <p>Voici l'ensemble des commentaires publiés sur cet article :</p>
            <ul class="commentsInPost">
                {% for comment in allComments %}
                    <li> <h3> {{ comment.title }} </h3> </li>
                    <li> par {{ comment.user_id }} </li>
                    <li> créé le : {{ comment.date_created }} </li>
                    <li> {{ comment.content }} </li>
                    <li> <a href="index.php?access=comment!commentdelete&id={{comment.id}}" accesskey="dc" title="DeleteComment">Supprimer ce commentaire </a> </li>
                {% endfor %}
            </ul>
        </section>

        </section>


    </main>
{% endblock %}